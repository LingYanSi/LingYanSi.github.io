<!DOCTYPE html>
<html lang="en">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
  <link rel="icon" href="http://lingyansi.github.io/images/icon/icon.jpg">
  <title>生活-电影</title>
  <style type="text/css">
  	  *{ margin:0; padding:0; }
  	  a:hover{ color:inherit;}
  	  a:active{ color:inherit;}
  	  a:visited{ color:inherit;}

  	  body{background:#f2f2f2;}
  	  .wrap{}
	  .main{ max-width:800px; margin:0 auto; color:#fff;}

	  .item{ display:block; text-decoration:none; color:inherit; position:relative; height:300px; background-position:center; background-size:cover; 
	  		/*-webkit-filter:grayscale(100%); */
	  }
	  .item>div{ position:absolute; bottom:0px; padding:8px; width:100%; box-sizing:border-box;
	  				background-image:-webkit-linear-gradient(bottom, rgba(0,0,0,0.4), rgba(0,0,0,0));
	  				background-image:linear-gradient(to top, rgba(0,0,0,0.4), rgba(0,0,0,0));
	  }
	  .item .name{ font-size:1.5em; }

	  aside,nav{display:none; }

	  /* 使用媒体查询 */
	  @media(min-width: 1000px){
	  	nav{ position:fixed; height:60px; width:100%; top:0; left:0; display:block;
	  		background-image:linear-gradient(180deg,rgba(247,104,104,1),rgba(247,104,104,0.7)); z-index:1000; 
	  	}
	  	nav>div{ max-width:1000px; height:100%; margin:0 auto; font-size:0;}
	  	nav span{ display:inline-block; padding:0 1em; line-height:60px; font-size:20px; color:rgb(255,255,255); cursor:pointer; }
	  	.nav-span-current{ background-color:rgba(247,104,104,0.7); }
	  	nav span:not(.nav-span-current):hover{ background-color:rgba(247,255,0,0.4);  }

	  	.wrap{max-width:1000px; margin:0 auto; display:flex; padding-top:75px; align-items:flex-start;}
	  	.main{ margin:0; flex:1; }
	  	.item+.item{ margin-top:4px; }

	  	aside{ display:block; margin-left:20px; background:rgb(255,255,255);  box-sizing:content-box; width:200px;
	  		border:1px solid rgba(0,0,0,0.1); padding:4px 4px 24px;
	  	}
	  	aside img{display:block; width:100%; height:auto;}
	  	.aside-title{ font-size:20px;  margin-top:4px; }
	  	.aside-urls{ font-size:16px; color:rgb(210,210,210);}
	  }
  </style>
 </head>
 <body>
	<div id="wrap" class="wrap">
		<nav>
			<div>
				<span class="nav-span-current">Film</span>
				<span>Tv</span>
			</div>
		</nav>
		<article id="main" class="main">
			<!-- <a href="http://movie.douban.com/subject/1931974/" class="item" style="background-image:url(../../images/3.jpg);">
				<div>
					<p class="name">血色浪漫</p>
					<p>时间：<span class="time">2004</span> 导演：<span class="director">钟跃民</span></p>
				</div>
			</a> -->
		</article>
		<aside>
			<img src="../../images/icon/icon.jpg">
			<p class="aside-title">灵岩</p>
			<div class="aside-urls">
				<p>github</p>
				<p>weibo</p>
				<p>douban</p>
				<p>lofter</p>
			</div>
		</aside>
	</div>
 <script type="text/javascript" src="../../build-zepto/ku.js"></script>
 <script type="text/javascript" src="tv-china.js"></script>
 <script type="text/javascript">
	var $main = document.querySelector('#main');
	var height = $main.clientWidth*9/16 ;

	// render单纯负责把数组转换成html字符串
	// 还需要数据的切换，查询，比如说我如何切换不同地区/不同类型？
	var movie = (function(List){
		var movie = {
			init:function(type,area){
				if( type==this.state.type && area==this.state.area ) return
				this.state.type = type , this.state.area = area ; 
				var arr = List[type] ;
				this.render(arr);
			},
			render:function(list){
				var str = list.map(function(ele){
					return '<a href="'+ele.douban+'" target="_blank" class="item" style="background-image:url('+ele.poster+');height:'+height+'px;">'+
						'<div>'+
							'<p class="name">'+ele.name+'</p>'+
							'<p>'+
								'时间：<span className="time">'+ele.time+'</span>'+
								' 导演：<span className="director">'+ele.director+'</span>'+
							'</p>'+
						'</div>'+
					'</a>' ;
				}).join('');
				$main.innerHTML = str ;
			},
			state:{
				type:'',
				area:''
			}
		};
		movie.init('film');
		return movie ;
	})(List);
	
	$('nav').find('span').on('click',function(){
		$(this).addClass('nav-span-current').siblings().removeClass('nav-span-current');
		if($(this).index()==0){
			movie.init('film');
		}else{
			movie.init('tv');
		}
	});

 </script>
 </body>
</html>
