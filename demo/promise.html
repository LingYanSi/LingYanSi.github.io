<!DOCTYPE html>
<html lang="en">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
  <link rel="stylesheet" href="css/reset.css">
  <link rel="shortcut icon" href="" />
  <title></title>
  <style type="text/css">
	  
  </style>
 </head>
 <body>
	<div id="wrap" class="wrap">
		<div id="main" class="main">
			<div id="animation" style="height:200px;width:200px;background:green;position:absolute;top:0;left:0;">
				
			</div>
		</div>
	</div>
 <script src="js/jquery-1.11.2.min.js"></script>
 <script type="text/javascript">
	var animation = document.querySelector('#animation');
	var left = 0 ;
	function toRight(){
		animation.style.left = (left++)+'px';
	}
	var globalID;
		(function haha(){
			toRight();
			globalID=requestAnimationFrame(haha)
		})();
	animation.addEventListener('click',function(){
		cancelAnimationFrame(globalID);
	});


	var p1 = new Promise(function(resolve,reject){
		if (true) // 
		{
			setTimeout(function(){
				resolve(12)
			},2000)
		}else{
			reject('失败了')
		}
	});
	p1.then(
		function(value){
			console.log(value)
			return new Promise(jsonp) // promise的值一旦确定就不会改变
		},function(reson){
			console.log(reson)
			return p1
		}
	).then(
		function(value){
			console.log(value)
		},function(reson){
			console.log(reson)
		}
	).catch(
		function(e){
			console.log(e)
		}
	);
	console.log('我是不要是');
	function http(resolve,reject){
		var xhr = new XMLHttpRequest();
		xhr.open('get','http://app.nacute.com/api/ajax/party/list?callback=xxx&pageNo=1&pageSize=10&_=1432176225628','true');
		xhr.timeout = 3000 ;
		xhr.ontimeout = function(){
			xhr.abort() // 终止请求
			console.log('请求抄手I')
			reject('请求超时')
		}
		xhr.reponseType = 'json';
		xhr.onreadystatechang = function(){
			if (xhr.readystate === 2) resolve('请求成功')
			else if (xhr.readystate === 4) resolve('请求成功')
		}
		xhr.send();
	}
		function jsonp(resolve,reject){
			var script = document.createElement('script') ,
				cbFunction = 'Jquery'+new Date().getTime() ,
				url = 'http://app.nacute.com/api/ajax/party/list?pageNo=1&pageSize=10&_=1432176225628&callback=' + cbFunction  ;
			script.setAttribute("type","text/javascript");
			script.src = url ;
			document.head.appendChild(script); // 启动请求
			 //自定义的回调函数result
			window[cbFunction] = function(data){
				resolve(data); 
			}

			setTimeout(function(){ 
				document.head.removeChild(script);
				reject('请求超时'); // 请求失败
			},3000); // 设置请求时间
		}
	$.ajax({type:'get',dataType:'jsonp',jsonp:'callback',url:'http://app.nacute.com/api/ajax/party/list?pageNo=1&pageSize=10&_=1432176225628'}).done(function(data){
		console.log('第一次');
		return $.ajax({type:'get',dataType:'jsonp',jsonp:'callback',url:'.com/api/ajax/party/list?pageNo=1&pageSize=10&_=1432176225628'})
	}).done(function(data){
		console.log('第二次')
	}).always(function(){
		console.log('总是被执行');
	}).fail(function(err){
		console.log('出错了')
	})
	;(function (){ // Block-scoped declarations (let, const, function, class) not yet supported outside strict mode
				   // let表示块级变量，const表示块级变量，class/let变量不会提升
		'use strict'
		class heihei
		{
			constructor(){
				this.height = 1000 ;
			}
			console(){
				console.log('我被打印')
			}
		}
		var daye = new heihei();
		daye.console()
	})();
 </script>
 </body>
</html>
