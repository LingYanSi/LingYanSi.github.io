<!DOCTYPE html>
<html lang="en">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
  <link rel="shortcut icon" href="" />
  <title></title>
  <style type="text/css">
	  *{margin:0;padding:0;}
	  .nav-wrap{position:relative;height:80px;}
	  .nav{position:fixed;z-index:1000;height:80px;width:100%;top:0;left:0;background-image:linear-gradient(180deg,rgba(247,105,105,1),rgba(247,105,105,0.8))}
	  .main{padding-top:0;}
	  
	  .animation{width:1200px;overflow:hidden;margin:0 auto;}
	  .animation-item{width:400px;height:300px;float:left;box-sizing:border-box;border:1px solid rgba(247,105,105,0.8);display:inline-block;position:relative;overflow:hidden;
						background-size:cover;}

	.animation-layer{width:100%;height:100%;position:absolute;top:100%;left:0;background:rgba(0,0,0,0.3);transform:rotateY(0deg);transform-origin:left;text-align:center;font-size:20px;color:rgb(255,255,255);line-height:50px;					position:relative;}
	.animation-layer a{text-decoration:none;color:rgb(255,255,255);position:absolute;bottom:0;display:block;width:100%;text-align:center;}
	.change{transition:all 0.5s;}
	.to-left{left:100%;}
	.to-right{left:0;}
	.to-top{top:100%;}
	.to-bottom{top:0;}

	.bott{height:200px;}
  </style>
 </head>
 <body>
	<div id="wrap" class="wrap">
		<div id="nav-wrap" class="nav-wrap">
			<div id="" class="nav">
				
			</div>
		</div>
		<div id="main" class="main">
			<div id="animation" class="animation"></div>
		</div>
		<div id="" class="bott">
			这是结尾处
		</div>
	</div>
 <script src="js/jquery-1.11.2.min.js"></script>
 <script id="yuan" src="js/global.js"></script>
 <script type="text/javascript">
	$(function(){
		var winHeight = $(window).height() ;
		var winWidth = $(window).width() ;
		
		document.getElementById('wrap').style.opacity = 1;

		//$('.animation-item').append('<div class="layer-item"></div>');
		var tv = [{name:'贞观之治',url:'2155164',time:'',bgd:'img/movie/zhiguanzhizhi.jpg'}
				  ,{name:'大明王朝',url:'2210001',time:'',bgd:'img/movie/damingwangchao.jpg'}
				  ,{name:'大明王朝',url:'',time:'',bgd:'img/movie/hua.jpg'}
				  ,{name:'大明王朝',url:'',time:'',bgd:'img/movie/fire.jpg'}
				  ,{name:'大明王朝',url:'',time:'',bgd:'img/movie/sunset.jpg'}
				  ,{name:'大明王朝',url:'',time:'',bgd:'img/134.jpg'}
				  ,{name:'大明王朝',url:'',time:'',bgd:'img/head.jpg'}
				  ,{name:'大明王朝',url:'',time:'',bgd:'img/movie/damingwangchao.jpg'}
				  ];
		append(tv);
		function append(tv){
			var len = tv.length ;
			var $animation = $('#animation') ;
			for (var i=0;i<len ;i++ )
			{
				$animation.append(
					'<div class="animation-item" style="background-image:url('+tv[i].bgd+');"><div class="animation-layer"><a class="name" target="_blank" href="http://movie.douban.com/subject/'+tv[i].url+'">'+tv[i].name+'</a><p class="time">'+tv[i].time+'</p></div></div>'
				)
			}
		}
		$('.animation-item').hover(function(event){
			var oX = $(this).offset().left,
				oY = $(this).offset().top ;
			var aX = event.pageX,
				aY = event.pageY ;
			var height = $(this).height(),
				width = $(this).width();
			var k = height/width ;
			var c = (aX-oX)*k - (aY-oY) ,
				d = -(aX-oX)*k+height-(aY-oY) ;//使用了一个简单的二维象限，然后判断点的位置
			var $layer = $(this).find('.animation-layer');
			$layer.removeClass('change');
			if (c>=0 && d>=0)
			{
				$layer.css({'left':'0','top':'-100%'}).show();
				$layer.addClass('change');
				$layer.css({'left':'0','top':'0'});
			}else if (c>0 && d<0)
			{
				$layer.css({'left':'100%','top':'0'}).show();
				$layer.addClass('change');
				$layer.css({'left':'0','top':'0'});
			}else if (c<0 && d>=0)
			{
				$layer.css({'left':'-100%','top':'0'}).show();
				$layer.addClass('change');
				$layer.css({'left':'0','top':'0'});
			}else if(c<0 && d<0){
				$layer.css({'left':'0','top':'100%'}).show();
				$layer.addClass('change');
				$layer.css({'left':'0','top':'0'});
			}
		},function(){
			var oX = $(this).offset().left,
				oY = $(this).offset().top ;
			var aX = event.pageX,
				aY = event.pageY ;
			var height = $(this).height(),
				width = $(this).width();
			var k = height/width ;
			var c = (aX-oX)*k - (aY-oY) ,
				d = -(aX-oX)*k+height-(aY-oY) ;
			var $layer = $(this).find('.animation-layer');
			if (c>=0 && d>=0) $layer.css({'left':'0','top':'-100%'});
			else if (c>0 && d<0) $layer.css({'left':'100%','top':'0'});
			else if (c<0 && d>=0) $layer.css({'left':'-100%','top':'0'});
			else if(c<0 && d<0) $layer.css({'left':'0','top':'100%'});
		});
		
		
	})
 </script>
 </body>
</html>
